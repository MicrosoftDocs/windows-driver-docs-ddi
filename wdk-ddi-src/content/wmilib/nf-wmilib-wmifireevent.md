---
UID: NF:wmilib.WmiFireEvent
title: WmiFireEvent function
author: windows-driver-content
description: The WmiFireEvent routine sends an event to WMI for delivery to data consumers that have requested notification of the event.
old-location: kernel\wmifireevent.htm
old-project: kernel
ms.assetid: 600391ef-f4bb-479b-ad73-305e365ed70d
ms.author: windowsdriverdev
ms.date: 2/24/2018
ms.keywords: WmiFireEvent, WmiFireEvent routine [Kernel-Mode Driver Architecture], k902_bae3b7d7-89d9-4ab9-8f26-2bd12e6b6caa.xml, kernel.wmifireevent, wmilib/WmiFireEvent
ms.prod: windows-hardware
ms.technology: windows-devices
ms.topic: function
req.header: wmilib.h
req.include-header: Wmilib.h
req.target-type: Universal
req.target-min-winverclnt: Available starting with Windows 2000.
req.target-min-winversvr: 
req.kmdf-ver: 
req.umdf-ver: 
req.ddi-compliance: 
req.unicode-ansi: 
req.idl: 
req.max-support: 
req.namespace: 
req.assembly: 
req.type-library: 
req.lib: Wmilib.lib
req.dll: 
req.irql: "<= DISPATCH_LEVEL"
topic_type:
-	APIRef
-	kbSyntax
api_type:
-	LibDef
api_location:
-	Wmilib.lib
-	Wmilib.dll
api_name:
-	WmiFireEvent
product: Windows
targetos: Windows
req.typenames: WMI_CHANGER_PROBLEM_DEVICE_ERROR, *PWMI_CHANGER_PROBLEM_DEVICE_ERROR
req.product: Windows 10 or later.
---

# WmiFireEvent function


## -description


The <b>WmiFireEvent</b> routine sends an event to WMI for delivery to data consumers that have requested notification of the event.


## -syntax


````
NTSTATUS WmiFireEvent(
  _In_     PDEVICE_OBJECT DeviceObject,
  _In_     LPCGUID        Guid,
  _In_     ULONG          InstanceIndex,
  _In_     ULONG          EventDataSize,
  _In_opt_ PVOID          EventData
);
````


## -parameters




### -param DeviceObject [in]

A pointer to the driver's <a href="..\wdm\ns-wdm-_device_object.md">DEVICE_OBJECT</a>. 


### -param Guid [in]

A pointer to the GUID that represents the event block. 


### -param InstanceIndex [in]

If the event block has multiple instances, specifies the index of the instance. 


### -param EventDataSize [in]

Specifies the number of bytes of data at <i>EventData</i>. If no data is generated for an event, <i>EventData</i> must be zero. 


### -param EventData [in, optional]

A pointer to a driver-allocated nonpaged buffer containing data generated by the driver for the event. If no data is generated for an event, <i>EventData</i> must be <b>NULL</b>. WMI frees the buffer without further intervention by the driver. 


## -returns



<b>WmiFireEvent</b> propagates the status returned by <a href="..\wdm\nf-wdm-iowmiwriteevent.md">IoWmiWriteEvent</a>, or returns STATUS_INSUFFICIENT_RESOURCES if it could not allocate memory for the event.




## -remarks



A driver calls <b>WmiFireEvent</b> to send an event to WMI for delivery to all data consumers that have requested notification of the event. All pointers passed to <b>WmiFireEvent</b> must point to nonpagable memory, such as nonpaged pool.

The driver sends an event only if it has been previously enabled by the driver's <a href="..\wmilib\nc-wmilib-wmi_function_control_callback.md">DpWmiFunctionControl</a> routine, which WMI calls to process an <b>IRP_MN_ENABLE_EVENT</b> request.

The driver writes any data associated with the event to the buffer at <i>EventData</i>. WMI fills in a <a href="..\wmistr\ns-wmistr-tagwnode_single_instance.md">WNODE_SINGLE_INSTANCE</a> structure with the data and calls <a href="..\wdm\nf-wdm-iowmiwriteevent.md">IoWmiWriteEvent</a> to deliver the event.

For more information about event tracing, see <a href="https://msdn.microsoft.com/library/windows/hardware/ff566350">WMI Event Tracing</a>. 




## -see-also

<a href="..\wmilib\nf-wmilib-wmisystemcontrol.md">WmiSystemControl</a>



<a href="..\wmilib\nc-wmilib-wmi_function_control_callback.md">DpWmiFunctionControl</a>



<a href="https://msdn.microsoft.com/library/windows/hardware/ff550859">IRP_MN_ENABLE_EVENTS</a>



 

 

<a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [kernel\kernel]:%20WmiFireEvent routine%20 RELEASE:%20(2/24/2018)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a>

